(this.webpackJsonpNMSMarketDatabase=this.webpackJsonpNMSMarketDatabase||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(7),l=a.n(r),o=(a(13),a(5)),i=a(1),c=a(2),u=a(4),m=a(3),p=(a(14),["systems"]),f=["name","glyphs","tags","buy","sell"],y=["name","price","percent"];function d(e){return"object"===typeof e&&y.every((function(t){return e.hasOwnProperty(t)}))&&"string"===typeof e.name&&"number"===typeof e.price&&"number"===typeof e.percent}function h(e){return e.every(d)}function v(e){return!("object"!==typeof e||!f.every((function(t){return e.hasOwnProperty(t)}))||f.length!==Object.keys(e).length)&&(h(e.buy)&&h(e.sell))}var b=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"list",value:function(e,t){return s.a.createElement("ul",{className:"items"},e.map((function(e,a){return s.a.createElement("li",{key:a,className:"item text"},s.a.createElement("div",{className:"clear"},s.a.createElement("span",{className:"left"},e.name),s.a.createElement("span",{className:"right"},"\u0244\xa0 ",e.price)),s.a.createElement("div",{className:"clear"},s.a.createElement("div",{className:"right"},t?e.percent>0?[s.a.createElement("span",{key:a+":arrow",className:"red bold"}," \u2191 ")]:[s.a.createElement("span",{key:a+":arrow",className:"green bold"}," \u2193 ")]:e.percent>0?[s.a.createElement("span",{key:a+":arrow",className:"green bold"}," \u2191 ")]:[s.a.createElement("span",{key:a+":arrow",className:"red bold"}," \u2193 ")],"\xa0",Math.abs(e.percent),"\xa0%")))})))}},{key:"listBuy",value:function(){return this.list(this.props.buy,!0)}},{key:"listSell",value:function(){return this.list(this.props.sell,!1)}},{key:"render",value:function(){var e=this,t=this.props.displayBuy?this.listBuy():null,a=this.props.displaySell?this.listSell():null;return s.a.createElement("div",{className:"system white"},s.a.createElement("h3",{className:"title system-title"},this.props.name),s.a.createElement("button",{className:"delete",title:"Delete",onClick:function(){return e.props.remove(e.props.name)}},"\ud83d\uddd1"),s.a.createElement("hr",{className:"system-underline"}),t,a)}}],[{key:"fromSystemData",value:function(e,t,n,r,l){return n&&e.buy.length>0||r&&e.sell.length>0?s.a.createElement(a,{key:l,remove:t,name:e.name,displayBuy:n,displaySell:r,glyphs:e.glyphs,tags:e.tags,buy:e.buy,sell:e.sell}):null}}]),a}(s.a.Component);var g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onAdd=function(){var e=n.state.count+1;n.state.onChanges.push(n.props.onAdd()),n.setState({count:e})},n.onRemove=function(){n.state.count>0&&(n.state.onChanges.pop(),n.setState({count:n.state.count-1}))},n.state={count:0,onChanges:[]},n}return Object(c.a)(a,[{key:"reset",value:function(){this.setState({count:0,onChanges:[]})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"list-input-container"},s.a.createElement("h4",{className:"list-input-title"},this.props.title,"\xa0:\xa0",this.state.count),s.a.createElement("ul",{className:"items"},this.state.onChanges.map((function(t,a){return s.a.createElement("li",{key:a,className:"item"},Object.keys(e.props.item).map((function(t,n){var r=function(e){switch(e){case"string":return function(e){return e.target.value};case"int":return function(e){return parseInt(e.target.value)};case"float":return function(e){return parseFloat(e.target.value)};default:throw new Error("Not a valid type.")}}(e.props.item[t]),l={},o=e.state.onChanges[a];return s.a.createElement("input",{key:a+":"+n,type:"string",placeholder:"Enter ".concat(t," Here . . ."),onChange:function(e){l[t]=r(e),o(l)}})})))})),s.a.createElement("div",{className:"button-container"},s.a.createElement("button",{className:"remove",onClick:this.onRemove}," -"),"\xa0",s.a.createElement("button",{className:"add",onClick:this.onAdd}," +"))))}}]),a}(s.a.Component),E=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={error:e.error,enabled:e.enabled,onClick:function(){}},n}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"clearfix create-container"},s.a.createElement("p",{className:"error-output"},this.props.error),s.a.createElement("button",{className:"create",disabled:!this.props.enabled,onClick:this.props.onClick},"Create"))}},{key:"reset",value:function(){this.setState({error:"No errors!",enabled:!0})}},{key:"setError",value:function(e){this.setState({error:e})}},{key:"setEnabled",value:function(e){this.setState({enabled:e})}}]),a}(s.a.Component);function N(e,t){Object.keys(t).forEach((function(a){a in e&&(e[a]=t[a])}))}var S=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).snRef=void 0,n.gRef=void 0,n.tRef=void 0,n.bRef=void 0,n.sRef=void 0,n.cRef=void 0,n.reset=function(){var e,t,a,s;n.setState({systemName:"",glyphs:"",tags:[],buy:[],sell:[]}),null===(e=n.tRef.current)||void 0===e||e.reset(),null===(t=n.bRef.current)||void 0===t||t.reset(),null===(a=n.sRef.current)||void 0===a||a.reset(),null===(s=n.cRef.current)||void 0===s||s.reset()},n.invalidItem=function(e){return""===e.name||void 0===e.name||null===e.name||0===e.price||void 0===e.price||null===e.price||0===e.percent||void 0===e.percent||null===e.percent},n.create=function(){""===n.state.systemName?n.setState({error:"The system must have a name."}):n.props.systems.some((function(e){return e.name===n.state.systemName}))?n.setState({error:"System name is not unique."}):0===n.state.buy.length&&0===n.state.sell.length?n.setState({error:"No items have been added to system."}):n.state.buy.some(n.invalidItem)||n.state.sell.some(n.invalidItem)?n.setState({error:"All items must have a name, price and percent."}):new Set(n.state.buy).size!==n.state.buy.length||new Set(n.state.sell).size!==n.state.sell.length?n.setState({error:"All item name in a system must be unique."}):(n.props.onCreate(n.state),n.reset())},n.state={systemName:"",glyphs:"",tags:[],buy:[],sell:[],error:"No errors!"},n.snRef=s.a.createRef(),n.gRef=s.a.createRef(),n.tRef=s.a.createRef(),n.bRef=s.a.createRef(),n.sRef=s.a.createRef(),n.cRef=s.a.createRef(),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"creator right"},s.a.createElement("h2",{className:"section-title title"},"New System"),s.a.createElement("div",{className:"new-system"},s.a.createElement("input",{type:"text",placeholder:"Enter System Name Here . . .",className:"form-margin",ref:this.snRef,value:this.state.systemName,onChange:function(t){return e.setState({systemName:t.target.value})}}),s.a.createElement("input",{type:"text",placeholder:"Enter Glyphs Here . . .",className:"form-margin",ref:this.gRef,value:this.state.glyphs,onChange:function(t){return e.setState({glyphs:t.target.value})}}),s.a.createElement(g,{title:"System Tags",item:{tag:"string"},ref:this.sRef,onAdd:function(){var t={tag:""};return e.state.tags.push(t),function(e){N(t,e)}},onRemove:function(){e.state.tags.pop()}}),s.a.createElement(g,{title:"Resources to Buy",item:{name:"string",price:"int",percent:"float"},ref:this.bRef,onAdd:function(){var t={name:"",price:0,percent:0};return e.state.buy.push(t),function(e){N(t,e)}},onRemove:function(){e.state.buy.pop()}}),s.a.createElement(g,{title:"Resources to Sell",item:{name:"string",price:"int",percent:"float"},ref:this.sRef,onAdd:function(){var t={name:"",price:0,percent:0};return e.state.sell.push(t),function(e){N(t,e)}},onRemove:function(){e.state.sell.pop()}}),s.a.createElement(E,{error:this.state.error,enabled:!0,ref:this.cRef,onClick:this.create})))}}]),a}(s.a.Component),w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).open=function(){n.setState({display:!0})},n.close=function(){n.setState({display:!1})},n.state={display:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"popup",className:this.state.display?"popup":"none",onClick:function(t){"popup"===t.target.id&&e.close()}},s.a.createElement("div",{className:"popup-content"},s.a.createElement("h1",null," ",this.props.title," "),s.a.createElement("p",null," ",this.props.text," "),s.a.createElement("div",{className:"popup-buttons"},[].concat(Object(o.a)(this.props.buttons),[{text:"Done",action:this.close}]).map((function(e,t){return s.a.createElement("button",{key:t,onClick:e.action,className:"popup-button"},e.text)})))))}}]),a}(s.a.Component),k=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).pRef=void 0,n.search=function(e){n.setState({search:e.target.value.toLowerCase()})},n.remove=function(e){var t=n.state.systems.filter((function(t){return t.name!==e}));localStorage.setItem("systems",JSON.stringify(t)),n.setState({systems:t})},n.pRef=s.a.createRef();var r,l=localStorage.getItem("systems");return r=l?JSON.parse(l):[],n.state={systems:r,search:""},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"app white"},s.a.createElement("h1",{className:"title site-title"},s.a.createElement("button",{className:"settings",onClick:function(){var t;return null===(t=e.pRef.current)||void 0===t?void 0:t.open()}},s.a.createElement("span",{role:"img","aria-label":"settings"}," \u2699\ufe0f "),"\ufe0f"),"No Man's Sky Market Database"),s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"created left"},s.a.createElement("div",{className:"search"},s.a.createElement("input",{type:"text",placeholder:"Enter Item Name Here . . .",onChange:this.search})),s.a.createElement("div",{className:"market"},s.a.createElement("div",{className:"buy left"},s.a.createElement("h2",{className:"section-title title"},"Buy"),s.a.createElement("div",{className:"systems"},this.state.systems.filter((function(t){return t.buy.some((function(t){return-1!==t.name.toLowerCase().indexOf(e.state.search)}))})).map((function(t,a){return b.fromSystemData(t,e.remove,!0,!1,a)})))),s.a.createElement("div",{className:"sell right"},s.a.createElement("h2",{className:"section-title title"},"Sell"),s.a.createElement("div",{className:"systems"},this.state.systems.filter((function(t){return t.sell.some((function(t){return-1!==t.name.toLowerCase().indexOf(e.state.search)}))})).map((function(t,a){return b.fromSystemData(t,e.remove,!1,!0,a)})))))),s.a.createElement(S,{systems:this.state.systems,onCreate:function(t){var a=[].concat(Object(o.a)(e.state.systems),[{name:t.systemName,glyphs:t.glyphs,tags:t.tags.map((function(e){return e.tag})),buy:t.buy,sell:t.sell}]);localStorage.setItem("systems",JSON.stringify(a)),e.setState({systems:a})}})),s.a.createElement(w,{title:"Options",text:"Save will save your systems to a file locally. Load will add all of the systems in a given file to your local DB. Clear will delete all entries from your local DB. Done will close this popup.",buttons:[{text:"Save",action:function(){var e=new Blob([localStorage.getItem("systems")],{type:"text/json"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(e,"NoMansSkySystemDB.json");else{var t=window.document.createElement("a");t.href=window.URL.createObjectURL(e),t.download="NoMansSkySystemDB.json",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}},{text:"Load",action:function(){var t=new Blob;if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(t);else{var a=window.document.createElement("input");a.type="file",a.onchange=function(){if(a.files){var t=new FileReader;t.onloadend=function(){if(t.error)alert("File upload failed. File Reader was not able to read file.");else try{var a=JSON.parse(t.result);if(console.log(a),s=a,console.log(s.systems),Array.isArray(s)?s.every(v):"object"===typeof s&&p.every((function(e){return s.hasOwnProperty(e)}))&&Array.isArray(s.systems)&&s.systems.every(v)){var n=[].concat(Object(o.a)(e.state.systems),Object(o.a)(a.systems));localStorage.setItem("systems",JSON.stringify(n)),e.setState({systems:n})}else alert("The file that you uploaded is invalid.")}catch(r){console.log(r),alert("The file that you uploaded could not be parsed. Try uploading a different file.")}var s},t.readAsText(a.files[0])}},document.body.appendChild(a),a.click(),document.body.removeChild(a)}}},{text:"Clear",action:function(){localStorage.clear(),e.setState({systems:[]})}}],ref:this.pRef}))}}]),a}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,a){e.exports=a(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.960f52c0.chunk.js.map